<!DOCTYPE html><!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Cómo pasé un proceso en Node.js de 5 horas a 5 minutos | Ulises Santana</title>


  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.png">

<meta property="og:type" content="article">
<meta name="theme-color" content="#F7E018">
<meta name="author" content="Ulises Santana">
<meta property="og:title" content="Cómo pasé un proceso en Node.js de 5 horas a 5 minutos">
<meta name="description" property="og:description" content="En un proyecto me tuve que enfrentar a un proceso en Node.js que después de rehacerlo de cero para hacerlo más sostenible era un 4400% más ineficiente. En este post te explico como conseguí que fuera más de 20% más rápido que el proceso original.">
<meta property="og:site_name" content="Ulises Santana">
<meta property="og:image" content="/assets/images/logo.png" ">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@ulisesantana">
<meta name="twitter:title" content="Cómo pasé un proceso en Node.js de 5 horas a 5 minutos">
<meta name="twitter:description" content="En un proyecto me tuve que enfrentar a un proceso en Node.js que después de rehacerlo de cero para hacerlo más sostenible era un 4400% más ineficiente. En este post te explico como conseguí que fuera más de 20% más rápido que el proceso original.">
<meta name="twitter:image" content="/assets/images/logo.png">


  <link rel="canonical" href="https://www.ulisesantana.dev/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/">

  <meta name="generator" content="Eleventy v2.0.0">
  
  
  <link rel="stylesheet" href="/styles/index.css">
  <style>.wyy1elgja h1{color:var(--accent-color);margin:2.25rem 0 0.5rem}.wyy1elgja time{display:inline-block;font-size:var(--font-size-2);font-weight:bold;margin-bottom:1rem}.wyy1elgja img{display:block;margin:0 auto}.wyy1elgja figcaption{text-align:center}.wyy1elgja ol,.wyy1elgja ul{display:flex;flex-direction:column;gap:8px;padding-left:2rem}.wyy1elgja li::marker{color:var(--accent-color);font-weight:bold}.wyy1elgja p,.wyy1elgja li{line-height:var(--line-height-normal-text)}.wyy1elgja .head{margin-bottom:2rem}

  :root {
    --min-preview-height: 110px;
    --min-preview-width: 220px;
  }

  .related-posts>ul {
    display: grid;
    justify-content: center;
    grid-template-columns: auto;
    grid-template-rows: auto;
    gap: 32px;
    max-width: 80ch;
    padding: 0;
    width: 100%;
  }

  .related-posts>ul>li {
    list-style: none;
  }

  .post-card-minimal {
    display: grid;
    border-radius: var(--border-radius);
    gap: 0;
    grid-template-columns: 1fr;
    grid-template-rows: var(--min-preview-height) auto;
    text-shadow: none;
    width: 100%;
  }

  .post-card-minimal.draft {
    border: 4px dashed var(--accent-color);
  }

  .post-card-minimal h4 {
    color: var(--accent-color);
    font-size: var(--font-size-2);
    margin: 0;
    margin-bottom: 4px;
  }

  .post-card-minimal .cover img,
  .post-card-minimal .cover object {
    border-radius: var(--border-radius) var(--border-radius) 0 0;
    height: 100%;
    object-fit: cover;
    width: 100%;
  }

  .post-card-minimal.draft .cover img,
  .post-card-minimal.draft .cover object {
    height: calc(100% - 8px);
  }

  .post-card-minimal .content {
    background-color: var(--bg-alt-color);
    border-bottom-right-radius: var(--border-radius);
    border-bottom-left-radius: var(--border-radius);
    padding: 8px;
    padding-bottom: 16px;
  }

  .post-card-minimal .content .excerpt {
    display: block;
    color: var(--text-color);
    font-size: var(--font-size-0);
    font-weight: 400;
    margin-bottom: 1rem;
  }

  .post-card-minimal time {
    color: var(--text-color);
    display: block;
    font-size: var(--font-size-0);
    font-weight: bold;
    margin-bottom: 1rem;
  }

  @media (min-width: 768px) {
    .related-posts>ul {
      grid-template-columns: repeat(2, 1fr);
    }
    .post-card-minimal {
      width: auto;
    }
  }

  @media (min-width: 1024px) {
    :root {
      --min-preview-height: 130px;
      --min-preview-width: 260px;
    }
    .related-posts>ul {
      grid-template-columns: repeat(3, 1fr);
    }
  }

.ws3sp0wuz b{color:var(--link-color);display:inline-block}.ws3sp0wuz .author-info{align-items:center;display:flex;margin:48px auto;max-width:100%;padding:0 24px;width:80ch}.ws3sp0wuz .description{font-size:var(--font-size-1);line-height:var(--line-height-normal-text);margin:0;text-align:justify}.ws3sp0wuz .info{align-items:flex-start;display:flex;flex-direction:column;gap:1rem;padding-left:30px}.ws3sp0wuz .title{font-size:var(--font-size-3);font-weight:400;font-family:var(--font-family-1);margin:0}@media (max-width:767px){.ws3sp0wuz .author-info{padding:0 25px}.ws3sp0wuz .info{gap:0.5rem}.ws3sp0wuz .description{font-size:var(--font-size-1);line-height:var(--line-height-normal-text);margin:1rem auto}}@media (max-width:575px){.ws3sp0wuz .author-info{display:block;text-align:center}.ws3sp0wuz .info{align-items:center;padding-left:0}.ws3sp0wuz .description{text-align:justify}}
.wcscm75lq .social-media ul{align-items:center;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:wrap;gap:1rem;margin:0;padding:0;width:100%}.wcscm75lq .social-media ul li{list-style:none}.wcscm75lq .social-media ul li:last-child{margin-right:0}@media screen and (max-width:767px){.wcscm75lq .social-media{width:100%}}@media print{.wcscm75lq .social-media{display:flex;flex-direction:column;margin:0;max-width:90vw}}
.wuzpprqmy .social-media-item{position:relative}.wuzpprqmy .social-media-item:hover .tooltip{opacity:1;visibility:visible;bottom:calc(100% + 5px)}.wuzpprqmy .social-media-item .only-print-data{display:flex;flex-direction:row;gap:16px}.wuzpprqmy .social-media-item .only-print-data span{display:block}.wuzpprqmy a,.wuzpprqmy a:visited{border:none;color:var(--highlight-color)!important;font-size:var(--font-size-5);padding:0.2rem;display:block}.wuzpprqmy a svg,.wuzpprqmy a:visited svg{display:block}@media print{.wuzpprqmy .social-media-item{align-items:center;display:flex;margin:8px;width:90vw}}.wuzpprqmy .tooltip{position:absolute;background-color:#fff;pointer-events:none;padding:8px;border-radius:3px;color:#333;font-size:var(--font-size-0);bottom:90%;left:50%;opacity:0;white-space:nowrap;visibility:hidden;z-index:var(--z-index-0);box-shadow:0 4px 15px rgba(0,0,0,0.2);transform:translate3d(-50%,0,0);transition:cubic-bezier(0.165,0.84,0.44,1) var(--transition-speed-fast)}.wuzpprqmy .tooltip:after{content:"";position:absolute;width:0;height:0;border-top:6px solid #fff;border-right:6px solid transparent;border-left:6px solid transparent;bottom:-6px;left:50%;transform:translateX(-50%)}
.wzsx78kcv .flipable-image{background-color:transparent;border:4px solid var(--link-color);border-radius:50%;flex-shrink:0;height:216px;margin:0 auto;padding:24px;perspective:1000px;width:216px}.wzsx78kcv img{width:100%;height:auto;display:block;border-radius:50%}.wzsx78kcv .flip-container{position:relative;width:100%;height:100%;text-align:center;transition:transform var(--transition-speed-regular);transform-style:preserve-3d}.wzsx78kcv .flipable-image:hover .flip-container,.wzsx78kcv .flipable-image:active .flip-container{transform:rotateY(180deg)}.wzsx78kcv .flipable-image:hover .flip-container .flip-front,.wzsx78kcv .flipable-image:active .flip-container .flip-front{opacity:0}.wzsx78kcv .flip-front,.wzsx78kcv .flip-back{background-color:transparent;border-radius:50%;position:absolute;width:100%;height:100%;backface-visibility:hidden;transition:opacity ease-in-out var(--transition-speed-regular)}.wzsx78kcv .flip-back{transform:rotateY(180deg)}@media (max-width:767px){.wzsx78kcv .flipable-image{width:180px;height:180px;padding:20px;margin-bottom:20px}}

  ul.tag-list {
    align-items: center;
    display: flex;
    justify-content: flex-start;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 8px;
    padding: 0;
    width: 100%;
  }

  ul.tag-list li {
    list-style: none;
    padding: 0;
  }


  span.tag {
    background-color: var(--accent-color);
    border-radius: 24px;
    color: var(--bg-color);
    font-size: var(--font-size-0);
    font-weight: bold;
    padding: 4px 8px;
  }

.wzhztpn9m footer{align-items:center;color:var(--text-color);display:flex;flex-direction:column;gap:1rem;justify-content:center;margin:0 auto;max-width:960px;overflow:hidden;padding:30px 15px 98px;position:relative;text-align:center;z-index:var(--z-index-0)}.wzhztpn9m .icon{font-size:var(--font-size-3)}.wzhztpn9m .bar{border-top:4px solid var(--link-color);border-radius:var(--border-radius);display:block;margin:16px auto 8px;width:75%}.wzhztpn9m .bottom-text{align-items:center;display:flex;flex-direction:column;font-size:var(--font-size-3);gap:1rem;justify-content:center}.wzhztpn9m .bottom-text svg{font-size:1.25rem;margin-bottom:-0.25rem}.wzhztpn9m .thanks a{margin-left:4px}@media screen and (min-width:768px){.wzhztpn9m footer{padding:30px 15px}.wzhztpn9m .description{width:50%}}
.wpsio4mfp svg{fill:var(--link-color)}
.wcscm75lq .social-media ul{align-items:center;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:wrap;gap:1rem;margin:0;padding:0;width:100%}.wcscm75lq .social-media ul li{list-style:none}.wcscm75lq .social-media ul li:last-child{margin-right:0}@media screen and (max-width:767px){.wcscm75lq .social-media{width:100%}}@media print{.wcscm75lq .social-media{display:flex;flex-direction:column;margin:0;max-width:90vw}}
.wuzpprqmy .social-media-item{position:relative}.wuzpprqmy .social-media-item:hover .tooltip{opacity:1;visibility:visible;bottom:calc(100% + 5px)}.wuzpprqmy .social-media-item .only-print-data{display:flex;flex-direction:row;gap:16px}.wuzpprqmy .social-media-item .only-print-data span{display:block}.wuzpprqmy a,.wuzpprqmy a:visited{border:none;color:var(--highlight-color)!important;font-size:var(--font-size-5);padding:0.2rem;display:block}.wuzpprqmy a svg,.wuzpprqmy a:visited svg{display:block}@media print{.wuzpprqmy .social-media-item{align-items:center;display:flex;margin:8px;width:90vw}}.wuzpprqmy .tooltip{position:absolute;background-color:#fff;pointer-events:none;padding:8px;border-radius:3px;color:#333;font-size:var(--font-size-0);bottom:90%;left:50%;opacity:0;white-space:nowrap;visibility:hidden;z-index:var(--z-index-0);box-shadow:0 4px 15px rgba(0,0,0,0.2);transform:translate3d(-50%,0,0);transition:cubic-bezier(0.165,0.84,0.44,1) var(--transition-speed-fast)}.wuzpprqmy .tooltip:after{content:"";position:absolute;width:0;height:0;border-top:6px solid #fff;border-right:6px solid transparent;border-left:6px solid transparent;bottom:-6px;left:50%;transform:translateX(-50%)}

  .scroll-to-top {
    align-items: center;
    background-color: var(--accent-color);
    border: none;
    border-radius: 50%;
    bottom: 32px;
    cursor: pointer;
    display: flex;
    height: 60px;
    justify-content: center;
    opacity: 1;
    position: fixed;
    right: 48px;
    transition: ease-in-out var(--transition-speed-fast);
    width: 60px;
    z-index: var(--z-index-3);
  }

  .scroll-to-top:hover {
    filter: drop-shadow(0 0 0.75rem var(--accent-color));
  }

  .hidden {
    opacity: 0;
  }

  @media print {
    .scroll-to-top {
      display: none;
    }
  }


  .up-icon {
    align-items: center;
    display: flex;
    fill: var(--bg-alt-color);
    font-size: 2.25rem;
    justify-content: center;
    margin: 0;
    padding: 0;
  }

  .up-icon svg path {
    stroke: var(--bg-alt-color);
    stroke-width: 4rem;
  }

.wodum24hl header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin:0 auto 24px;max-width:960px;width:100%}.wodum24hl header .lang{font-size:32px}.wodum24hl .isotype{border:none;color:transparent;font-size:var(--font-size-5);font-weight:600;letter-spacing:1px;-webkit-text-stroke-width:1.5px;-webkit-text-stroke-color:var(--link-color);text-decoration:none}@media screen and (max-width:767px){.wodum24hl header{justify-content:center}}
.wpaf4io7c nav{display:block;position:absolute;bottom:0;left:0;width:100%}.wpaf4io7c .nav-items{align-items:center;background:var(--menu-mobile-bg-color);bottom:-100%;display:flex;flex-direction:column;height:fit-content;left:0;margin:0;padding:16px 16px 104px;position:fixed;transition-property:all;transition-timing-function:ease-in-out;transition-duration:var(--transition-speed-regular);width:100%;z-index:var(--z-index-1)}.wpaf4io7c .nav-items li:first-child{font-size:32px}.wpaf4io7c button.mobile-menu{background:var(--link-color);border:none;border-radius:50%;bottom:32px;color:black;display:block;font-size:32px;height:60px;left:calc(50% - 30px);padding-bottom:4px;position:fixed;width:60px;z-index:var(--z-index-5)}.wpaf4io7c .bar{display:block;position:relative;width:24px;height:4px;border-radius:3px;background-color:var(--bg-color);margin:4px auto 2px;transition:all ease-in-out var(--transition-speed-fast)}.wpaf4io7c button.mobile-menu.active .bar:nth-child(1){transform:rotate(-45deg);margin-top:14px}.wpaf4io7c button.mobile-menu.active .bar:nth-child(2){transform:rotate(45deg);margin-top:-6px}.wpaf4io7c button.mobile-menu.active .bar:nth-child(3){opacity:0;transform:rotate(45deg)}.wpaf4io7c .nav-items.active{bottom:-4px}.wpaf4io7c li{font-weight:600;list-style:none;padding:8px}.wpaf4io7c .nav-items .active{border-bottom:solid var(--accent-color) 4px}.wpaf4io7c .nav-items a,.wpaf4io7c .nav-items a:visited{color:var(--text-color)}@media screen and (min-width:768px){.wpaf4io7c nav{background:transparent;display:inline;padding:0;position:relative}.wpaf4io7c .nav-items{padding:0;align-items:center;background:transparent;flex-direction:row;position:relative;width:fit-content}.wpaf4io7c button.mobile-menu{display:none}}
.wk09v1fvl .theme-switch{cursor:pointer;color:var(--black);border-radius:50%;display:block;position:relative}.wk09v1fvl .theme-switch input{opacity:0;position:absolute;width:0;height:0}.wk09v1fvl .theme-switch .icon{align-items:center;background:yellow;border-radius:50%;display:flex;filter:drop-shadow(0 0 8px yellow);height:60px;justify-content:center;transition:all ease-in-out var(--transition-speed-regular);width:60px}.wk09v1fvl .theme-switch input:checked+.icon{background:#656565;filter:none}.wk09v1fvl .theme-switch input+.icon svg{border-radius:50%;fill:yellow;filter:drop-shadow(0 0 1px black);font-size:32px;transition:all ease-in-out var(--transition-speed-regular)}.wk09v1fvl .theme-switch input:checked+.icon svg{background-color:transparent;fill:var(--light-border-color);filter:none}</style>
  
  
  <script type="module" src="/components/index.js"></script>
  <script></script>
  <script defer="defer" src="/components/legacy.js"></script>
</head>

<body class="theme-dark">
  <site-header class="wodum24hl"><header>
  <a class="isotype" href="/">ulisesantana.dev</a>
  
  <nav-items class="wpaf4io7c"><nav class="no-print">
  <ul class="nav-items">
    <li>
        <a href="/en/">
        🇬🇧
        </a>
      </li>
<li>
        <a href="/blog/">
        BLOG
        </a>
      </li>
<li>
        <a href="/">
        SOBRE MÍ
        </a>
      </li>
    <li><theme-switch class="wk09v1fvl"><div class="theme-switch">
  <input type="checkbox">
  
  <span class="icon">
    <svg viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
      <path d="M23.86 29.15H12.11a.8.8 0 1 0 0 1.6h11.75a.8.8 0 0 0 0-1.6Z" class="clr-i-solid clr-i-solid-path-1"></path>
      <path d="M22 32.15h-8a.8.8 0 1 0 0 1.6h8a.8.8 0 1 0 0-1.6Z" class="clr-i-solid clr-i-solid-path-2"></path>
      <path d="M18 2.25a11 11 0 0 0-11 11 10.68 10.68 0 0 0 1 4.63 16.36 16.36 0 0 0 1.12 1.78 17 17 0 0 1 2 3.47 16.19 16.19 0 0 1 .59 4h5.69v-5.52l-2.86-3.13 3-3a.8.8 0 0 1 1.13 1.13l-1.89 1.89L19 21v6.17h5.3a16.19 16.19 0 0 1 .59-4 17 17 0 0 1 2-3.47A16.31 16.31 0 0 0 28 17.86a10.68 10.68 0 0 0 1-4.63A11 11 0 0 0 18 2.25Zm.45 9.75-2.73 2.73a.8.8 0 1 1-1.13-1.13l2.73-2.73A.8.8 0 1 1 18.45 12Z" class="clr-i-solid clr-i-solid-path-3"></path>
      <path fill="none" d="M0 0h36v36H0z"></path>
    </svg>
  </span>
</div>

</theme-switch></li>
  </ul>
  <button title="Toggle menu" class="mobile-menu" onclick="(function toggleMenu() {
      const menu = document.querySelector(':scope .nav-items')
      const btn = document.querySelector(':scope button')
      menu.classList.toggle('active')
      btn.classList.toggle('active')
    })()">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>
</nav>

</nav-items>
</header>

</site-header>
<main><article class="wyy1elgja">
  <figure class="wyy1elgja">
    <object data="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/cover.png" title="Cómo pasé un proceso en Node.js de 5 horas a 5 minutos" type="image/png">
  <img src="/assets/images/fallback.png" title="Cómo pasé un proceso en Node.js de 5 horas a 5 minutos">
</object>
    
  </figure>
  <div class="head wyy1elgja">
    <h1 custom class="wyy1elgja">Cómo pasé un proceso en Node.js de 5 horas a 5 minutos</h1>
    <time datetime="viernes, 20 de mayo de 2022" class="wyy1elgja">viernes, 20 de mayo de 2022</time>
    <site-tags url="/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/"><ul class="tag-list">
    <li>
            <site-tag><span class="tag">#node.js</span>

</site-tag>
          </li>
        
          <li>
            <site-tag><span class="tag">#performance</span>

</site-tag>
          </li>
        
</ul>

</site-tags>
  </div>
  <h2>El contexto</h2>
<p>Esta historia comienza con un equipo de 5 personas, del cual yo era parte desde hacía casi un año y las otras 4 se habían incorporado en los últimos 3 meses. En este equipo mi rol era el de Senior Node.js Developer y era el único que tenía experiencia previa trabajando con Node.js. Aparte había otra persona con experiencia con JavaScript y Dart, lo cual hacía que le resultara fácil adaptarse a los proyectos en TypeScript, que es el lenguaje en el que estaban todos los proyectos. Sin embargo, las otras tres personas del equipo tenían muy poca experiencia previa en JavaScript.</p>
<p>Por otro lado, estábamos trabajando en las distintas partes de un motor de facturación que necesitaba ser adaptado para un cambio legislativo. Esto último significa que el deadline no se podía mover, si el cambio no estaba hecho para esa fecha la empresa no podía generar la facturación del siguiente mes. En caso de que no llegáramos le rompíamos el cash flow. Suave, sin presión.</p>
<p>Por concluir esta contextualización:</p>
<ol>
<li>No todo el equipo controlaba la tecnología en la que se estaba trabajando.</li>
<li>El deadline es fijo y crítico, ya que rompemos el cash flow de la empresa en caso de retrasarnos.</li>
</ol>
<h2>La calma antes de la tormenta</h2>
<p>A Abraham Lincoln se le atribuye la siguiente frase: <strong>Dame 6 horas para cortar un árbol y pasaré 4 afilando el hacha</strong>. Sabíamos que iba a haber un cambio legislativo que conllevarían cambios en los proyectos, así que desde 2 meses antes del deadline propusimos refactorizar partes de los proyectos y uno en concreto solicitamos rehacerlo desde 0, ya que en ese entonces era realmente un prototipo que funcionaba, pero costaba mantener y con el cambio legislativo se iba a hacer más insostenible. Nos dieron luz verde a esta propuesta y dicho prototipo iba a ser rehecho desde cero. Vamos a llamar a este proyecto el <em>Proyecto Leñador</em>:</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/lumberjack.jpeg" alt="Yo vestido de Leñador con hacha al hombro"></p>
<p>En <a href="https://leanmind.es/es/" target="_blank" rel="noopener">Lean Mind</a> por regla general trabajamos haciendo pair o mob programming, por lo que nadie nunca está solo y así facilitamos que el código sea más sostenible, además de que tanto la autoría del código como el conocimiento se comparta. Sin embargo, como teníamos 5 proyectos que actualizar decidimos dividirnos lo máximo posible para poder abarcar al menos 3 proyectos a la vez y poder tener los cambios lo antes posible. Eso sale a 2 personas por proyecto y una persona sola. Esa persona que se quedó sola fui yo y estuve a varias bandas asistiendo a los diferentes equipos a la par que trabajaba en el proyecto en el que me tocaba.</p>
<p>Esta situación hizo que por falta de tiempo descuidara el proceso de code review y simplemente me centrara en resolver las dudas del equipo sobre todo en dominio, ya que recuerdo que el resto del equipo llevaba sólo 3 meses con el cliente y el dominio del negocio tenía una curva de asimilación de al menos 6 meses. Además, como hacíamos TDD, si los test pasan y reflejaban bien las especificaciones de negocio no había de qué preocuparse.</p>
<p>El <em>Proyecto Leñador</em> fue llevado a cabo por miembros del equipo que no tenían mucha experiencia en JavaScript y ninguna en TypeScript. Esto no suponía a priori ningún problema porque ya llevaban tres meses haciendo pair o mob programming con otros miembros del equipo que sí tenían experiencia y estas mismas personas habían hecho aportaciones a los diferentes proyectos en TypeScript. Simplemente pedían ayuda o consejo cuando lo necesitaban y se les asistía.</p>
<p>La realidad es que el salto de calidad en el <em>Proyecto Leñador</em> era más que evidente. No vi el proyecto en su estado final directamente, sino que lo vi evolucionar a lo largo de las semanas y realmente era mucho más claro en su propósito y no había sorpresas en la implementación. Yo había sido parte del equipo que había hecho ese prototipo 9 meses atrás y la verdad es que había ciertas partes que para mí eran un pelín oscuras, que no terminaba de entender cómo funcionaban o cuál era su propósito final. Esto se debía, entre otras cosas, a que el prototipo original no se había hecho enteramente en mob o pair programming, sino que había partes enteras que habían sido hechas por un desarrollador que ya no formaba parte del equipo.</p>
<p>Volviendo al <em>Proyecto Leñador</em>, estaba muy orgulloso de lo que el equipo había conseguido, realmente era un proyecto mucho más sostenible, eliminando sorpresas. Sin embargo, cuando estaba terminado e hice una última revisión algo más extensa con el equipo veía algunos flujos de datos que tenían toda la pinta de bloquear el Event Loop, o al menos parte de él, pudiendo provocar pérdidas de performance. Para comprobar el performance de este nuevo proyecto pasé al siguiente paso que teníamos planeado: hacer una prueba comparando el prototipo original con el <em>Proyecto Leñador</em>.</p>
<p>El prototipo original basándose en un set de datos de unos cientos de miles de registros era capaz de hacerlo todo en unos 7 minutos. Con el mismo set de datos probé con el <em>Proyecto Leñador</em> y el resultado fue que tardó nada más y nada menos que <strong>5 horas 7 minutos y 54 segundos.</strong> Estamos hablando de que tardaba 44 veces más. El proceso real en producción tardaba cada noche unos 40 minutos, por lo que si mandábamos esto a producción el nuevo proceso tardaría unas 29 horas y 20 minutos, cada día. Esta pérdida de performance era inasumible. En ese momento mi yo interno era algo así:</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/coffin-dance.gif" alt="GIF de los bailarines del ataúd"></p>
<p>Por meter más leña al fuego [¿lo pillas? Leña, <em>Proyecto Leñador</em> 🤣], esto pasó a unos 10 días del deadline, 10 días naturales. No podíamos replantear el proyecto, había que optimizarlo en menos de una semana, además de que había más cosas en la parrilla. Recuerdo que habían otros 4 proyectos que necesitaban ser actualizados para el cambio legislativo. En esta situación, por un lado me motivaba a mí mismo pensando cosas del tipo <em>Llevo toda mi vida preparándome para este momento, los talleres sobre asincronía en Node.js con <a href="https://twitter.com/matteocollina" target="_blank" rel="noopener">Matteo Collina</a> y <a href="https://twitter.com/jasnell" target="_blank" rel="noopener">James Snell</a> van a dar sus frutos</em>. Sin embargo, otra parte de mí era una mezcla de esto:</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/sheldon-bag.gif" alt="GIF de Sheldon respirando compulsivamente en una bolsa de papel"></p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/pickle-rick.gif" alt="GIF de Pickle Rick a punto de morir de insolación"></p>
<p>La realidad es que entré en modo pánico y empecé a refactorizar el proyecto y tratar de mejorar en performance todo lo que podía. No cambié nada de lógica, me limité a cambiar el flujo de datos asíncrono, que era mayormente todo lo que tuviera que ver con leer o escribir en base de datos.</p>
<h2>Campeando la tormenta</h2>
<p>Tras este refactor vi ciertos patrones que quiero remarcar y mostrar:</p>
<h3>1. Evita async innecesarios</h3>
<pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncRandomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>Estas dos funciones son idénticas a excepción de que la segunda es asíncrona. Sin ningún motivo, pero es asíncrona. Cada vez que usamos async en una función, estamos automáticamente haciendo que devuelva una promesa, y eso hay que gestionarlo de más.</p>
<p>Puede parecer una tontería, pero afecta. Hice una pequeña demo para demostrar hasta qué punto esto afecta a nuestro performance. Lo que hace el script es ejecutar cada una de estas funciones por separado un millón de veces.</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/useless-async.png" alt="Resultado de ejecutar la demo para la comparación del async"></p>
<p>Como podemos ver, sólo por poner ese <code>async</code> hemos hecho que tarde casi seis veces más. Aplicándolo a la vida real, en una suite de test reducimos un 40% el tiempo que tardaba en ejecutarse sólo quitando los async innecesarios que se nos habían quedado después de un refactor. Simplemente quitamos los async que teníamos en las arrow functions que ya no nos hacía falta. Haciendo esto pasamos de tardar algo más de 2 minutos en tirar la suit de test a poco menos de minuto y medio.</p>
<h3>2. Evita los await dentro de los bucles.</h3>
<p>Imagina que tienes una tarea que sea: <em>En base a una lista de IDs tienes que recuperar información de una API</em>. Por limitaciones técnicas no puedes pasarle a la API la lista de IDs, sino que tienes que hacer una llamada por cada ID. ¿Cuál es la primera idea que se nos viene a la cabeza? Probablemente un bucle, apesta a bucle. La implementación podría ser algo así:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUserListInfo</span><span class="token punctuation">(</span><span class="token parameter">ids</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> id <span class="token keyword">of</span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetchUserInfo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> values<br><span class="token punctuation">}</span></code></pre>
<p>Parece sencillo y además si lo probamos veremos que funciona. Consigue la información de todos los usuarios sin problemas. ¿Sin problemas? Ese await dentro del <code>for</code> fuerza a que se termine de completar cada promesa antes de procesar la siguiente.</p>
<img-caption src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/await-loop.jpeg" alt="Las promesas se resuelven una a una">
  Resolviendo las promesas con un await dentro de un for
</img-caption>
<p>Esto significa que si de media la API tarda&quot;&quot;nemos 100 IDS que procesar, tardaremos unos 5 segundos enrealizar la tarea. No es que sea un drama, pero si implementamos esta otra solución la cosa cambia bastante:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fetchUserListInfo</span><span class="token punctuation">(</span><span class="token parameter">ids</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> id <span class="token keyword">of</span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fetchUserInfo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>Aunque parezca igual aquí hay tres sutiles diferencias:</p>
<ol>
<li>La función ya no es asíncrona, aunque sí que devuelve una promesa.</li>
<li>Dentro del for ya no hacemos un await</li>
<li>Devolvemos un Promise.all en vez de los valores como hacíamos antes.</li>
</ol>
<p>La gran diferencia de esta solución es que dentro del bucle no resolvemos las promesas, sino que simplemente las añadimos a nuestro array pendiente de ser resueltas. Cualquier función que devuelva una promesa la devuelve en este estado que hasta que no uses <code>await</code> o <code>.then</code> no estará <em>fulfilled</em> o <em>rejected</em>. Podemos verlo como el experimento del gato de Schrodinger, hasta que no abres la caja no sabes si el gato está vivo o muerto. A las promesas les pasa algo parecido, hasta que no las resuelves están en estado <em>pending</em> y una vez resueltas pueden estar <em>fulfilled</em>, que es cuando se ha resuelto satisfactoriamente y lo que tienes es el valor, o <em>rejected</em> que es cuando ha habido algún error y lo que hace es lanzar la excepción que tienes que capturar con un try/catch o con el <code>.catch</code>.</p>
<p>Volviendo a la solución, vemos que las promesas no se resuelven, sino que se almacenan directamente en estado <em>Pending</em>, y la función al devolverlas las resuelve todas <em>a la vez</em>. Esto hace que ahora la tarea se haga mucho más rápido, tardando lo que tarde en responder la llamada a la API más lenta.</p>
<img-caption src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/promise-all.jpeg" alt="Las promesas se resuelven a la vez">
  Resolviendo las promesas con un Promise.all
</img-caption>
<p>Para ver esto mejor voy a mostrar otra demo en la que usamos casi el mismo código, lo único que cambia es que sustituimos la llamada a la API por una simple espera de 1 milisegundo. Lo que vamos a ver es cuanto tarda cada una de las soluciones ejecutando esta tarea para una lista de 100 IDS y lo va a hacer 1000 veces para que podamos ver si realmente hay una diferencia de performance o no.</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/async-loop.png" alt="Resultado de ejecutar la demo para bucles asíncronos"></p>
<p>Como vemos la diferencia es abismal. Para la misma tarea cuando usamos <code>Promise.all</code> tarda poco más de 1 segundo, pero cuando usamos <code>await</code> dentro del for tarda <strong>casi 2 minutos</strong>. Esta diferencia en un entorno real es crítica y lo peor es que por lo general no nos damos cuenta de que el problema está en esta clase de sitios.</p>
<p>Algo a tener en cuenta sobre el <code>Promise.all</code>; en caso de que alguna promesa lance un error parará el Promise.all dejando promesas sin cumplir. Para evitar esto el método que nos devuelve la promesa debe tener su propio try/catch y gestionar el error. Por ejemplo:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchUserInfo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token operator">:</span> User <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.awesome-project.com/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>    <span class="token keyword">return</span> User<span class="token punctuation">.</span><span class="token function">fromResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error fetching user </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><br>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><br>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NullUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>También existe el <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled" target="_blank" rel="noopener">Promise.allSettled</a> que evita que el error pare el proceso de resolver todas las promesas. Otra diferencia es que lo que nos devuelve esta estructura:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">PromiseAllSettleReturnValue<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">{</span><br>  status<span class="token operator">:</span> <span class="token string">'fulfilled'</span> <span class="token operator">|</span> <span class="token string">'rejected'</span><span class="token punctuation">,</span><br>  value<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span><br>  reason<span class="token operator">?</span><span class="token operator">:</span> Error<br><span class="token punctuation">}</span><span class="token operator">></span></code></pre>
<h3>3. Usa Promise.all siempre que puedas</h3>
<p>En nuestro día a día desarrollando soluciones de software nos encontramos que en más de una ocasión necesitamos varios recursos de diferentes sitios, ya sean tablas, bases de datos o APIs. Todo esto además tiene una naturaleza asícrona y necesitamos gestionarla.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readAllUserInfo</span><span class="token punctuation">(</span><span class="token parameter">userId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><br>  <span class="token keyword">const</span> contracts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readContractsForUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><br>  <span class="token keyword">const</span> invoices <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readInvoicesForUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span>user<span class="token punctuation">,</span><br>    contracts<span class="token punctuation">,</span><br>    invoices<br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Aquí vemos un problema parecido al anterior, pero sin bucles. Aunque es menos dramático, es otro de los sitios de donde podemos rascar performance si utilizamos <code>Promise.all</code>, ya que como vemos ninguna de las peticiones depende de la otra, por lo que podríamos pedir toda la información a la vez y así reducir el tiempo que necesita la función para realizar la tarea.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readAllUserInfo</span><span class="token punctuation">(</span><span class="token parameter">userId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span> user<span class="token punctuation">,</span> contracts<span class="token punctuation">,</span> invoices <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token function">readUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token function">readContractsForUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token function">readInvoicesForUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><br>  <span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span>user<span class="token punctuation">,</span><br>    contracts<span class="token punctuation">,</span><br>    invoices<br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Aquí vemos como todas las llamadas se pasan al <code>Promise.all</code> y las sacamos por destructuring en el mismo orden en el que se la hemos pasado. Como pasó antes, esto tardará lo que tarde la petición más lenta, en vez de tener que esperar por todas una detrás de otra.</p>
<h3>4. Sé consciente de cuantas promesas estás gestionando</h3>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fetchUserListInfo</span><span class="token punctuation">(</span><span class="token parameter">ids</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>ids<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fetchUserInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>Esta sería otra forma de hacer el <code>fetchUserListInfo</code> que hemos visto un par de diapositivas atrás. Tanto esta como la anterior solución tienen un problema, no sabes cuántas promesas vas a tener en el <code>Promise.all</code>. En casos en los que no sabes el número de promesas que vas a gestionar o este número es muy alto es recomendable usar la librería <code>p-map</code> y limitar la concurrencia. La razón para hacer esto es que si tienes demasiadas promesas puedes acabar haciéndote un ataque de denegación de servicio a ti mismo sin darte cuenta.</p>
<p>En el <em>Proyecto Leñador</em> más que un ataque de denegación de servicio lo que nos preocupaba era ahogar la base de datos. En estos proyectos la práctica habitual era limitar la concurrencia al número de conexiones que teníamos configurado para la base de datos, evitando así ahogarla.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> pMap <span class="token keyword">from</span> <span class="token string">'p-map'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">fetchUserListInfo</span><span class="token punctuation">(</span><span class="token parameter">ids</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">pMap</span><span class="token punctuation">(</span><br>    ids<span class="token punctuation">,</span><br>    fetchUserInfo<span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><span class="token literal-property property">concurrency</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><br>  <span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>La diferencia usando <code>p-map</code> es que tienes que pasar por separado la lista sobre la que quieres iterar, la función que se ejecutará para cada uno de los elementos de la lista y por último las opciones de <code>p-map</code>. En este caso sólo le definimos que queremos que como máximo resuelva 10 promesas a la vez.</p>
<p>Por último, tener en cuenta que <code>p-map</code> en su versión 5 pasó a ser de tipo ESModules y a menos que tu proyecto esté hecho de esta manera no te va a funcionar. Para poder usarlo con CommonJS necesitas tirar de la versión 4. La realidad es que ambas versiones sólo difieren en si funcionan con ESModules o con CommonJS. Vamos, que si importas cosas en ficheros con <code>import</code> o con <code>require</code> respectivamente.</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/cjs-to-esm.png" alt="Pasar de CommonJS to ESModules"></p>
<h3>5. Haz caso de los warnings</h3>
<p>No sé si a alguien más le pasa que la mayoría del tiempo ignoras los warnings y sólo le das importancia cuando son errores. En la consola al ejecutar el proceso me salía esto:</p>
<pre class="language-shell"><code class="language-shell"><span class="token punctuation">(</span>node<span class="token punctuation">)</span> warning: possible EventEmitter memory leak detected.<br><span class="token number">11</span> listeners added.<br>Use emitter.setMaxListeners<span class="token punctuation">(</span><span class="token punctuation">)</span> to increase limit.</code></pre>
<p>El mensaje nos dice que Node.js ha detectado un posible memory leak debido al <em>Event Emitter</em> porque se están añadiendo más listeners de los recomendados. Te ofrece la opción de incrementar el límite para en caso de que tengas claro lo que estás haciendo y lo necesites.</p>
<p>Yo pensaba <em>Meh, es un warning</em>. En una primera instancia simplemente hice lo que me decía y aumenté los listeners sin darle mayor importancia. Sin embargo, el proceso todavía era demasiado lento así que investigué el warning.</p>
<p>El problema era que había event handlers que se estaban creando continuamente con cada conexión que se solicitaba al pool de conexiones de la base de datos, pero que no se estaban eliminando, siendo el causante del memory leak. Tras implementar el fix en el que cada vez que se devuelve una conexión al pool se limpian los event handlers asociados a la conexión vimos una mejoría en la performance, tardando 4 veces menos de lo que tardaba antes.</p>
<h2>Resultado</h2>
<p>Con todas estas mejoras en el <em>Proyecto Leñador</em> lo volvimos a ejecutar con el mismo set de datos y en esta ocasión tardó <strong>04:52</strong>. Era incluso más rápido que el prototipo original que tardaba 7 minutos. En ese momento mi yo interior era algo así:</p>
<p><img src="/assets/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/fuck-yeah-dude.gif" alt="GIF de El Nota en el Gran Lebowski dándolo todo"></p>
<p>No recuerdo si era de día, de noche, ni qué hora era. Sólo recuerdo ese sentimiento de <em>FUCK YEAH</em>, ese paso de la ansiedad a la paz. Y ya por estar completamente seguros de que había una mejora, ejecutamos una prueba con un set de datos semejante al que se enfrentaba en producción día a día, que eran millones de registros en la base de datos. En este caso el resultado quedó claro:</p>
<ul>
<li>Prototipo: 41:29 minutos</li>
<li><em>Proyecto Leñador:</em> 31:56 minutos</li>
</ul>
<p>Aparte de haber mejorado la sostenibilidad del proyecto, habíamos mejorado la performance haciendo que el proceso fuera más de un 20% más rápido. Y todo esto llegando al deadline.</p>
<h2>Cosas que aprendí</h2>
<p>Al final todo salió bien, pero sin duda aprendí un par de cosas de esta experiencia:</p>
<ul>
<li><strong>La asincronía en JS está más incomprendida de lo que pensaba.</strong> La gestión de asincronía en JavaScript es algo que no todo el mundo tiene interiorizado. Todo el mundo usa promesas y el async/await y empezar a trabajar con JavaScript o TypeScript no es tan complicado, lo que sí es más complicado es saber cómo gestionar la asincronía en JavaScript. Aclarar, que la asincronía en sí es algo que no es fácil de comprender, ya que esto pasa también en otros lenguajes.</li>
<li><strong>Forma a tu equipo, comparte el conocimiento.</strong> Busca tiempo para poco a poco ir formándolo. En mi experiencia el mob programming ayuda bastante, pero no es suficiente. Algunos conceptos necesitas interiorizarlos y para eso lo mejor es hacer katas o tener formaciones con objetivos concretos. Al principio es bastante duro preparar esta clase de formaciones, pero a medida que las tengas podrás reusarlas a medida que entren personas nuevas o si cambias de equipo puedes formar a ese nuevo equipo.</li>
<li><strong>La responsabilidad debe ser compartida.</strong> Es bastante típico que las personas con más experiencia del equipo se echen las cosas a la espalda. La responsabilidad debe ser compartida, tanto tecnológica como en lo relativo a diseño de software o metodologías. La idea es que los miembros del equipo aprendan unos de otros sin importar el nivel de experiencia que tengan. El intercambio de ideas desde distintos puntos de vista puede enriquecer mucho al equipo.</li>
<li><strong>Sé prescindible.</strong> Si eres prescindible no serás el cuello de botella. En esta historia yo fui un cuello de botella por conocimiento y por dominio. Es algo de lo que me arrepiento, pero también algo de lo que aprendí. Ojo, digo prescindible que no innecesario. Con esto quiero decir que no seas crítico por conocimiento, ya sea de dominio, procesos o tecnología. Trata siempre de compartir tu conocimiento con el equipo y documentarlo. Todo lo que tiene un inicio tiene un fin, por lo que algún momento dejarás de estar en el equipo en el que estás ahora. Cuando eso pase lo importante es que no te lleves conocimiento contigo, sino que lo hayas dejado en el equipo en forma de documentación. De esta manera serás prescindible.</li>
</ul>
<p>Y esta ha sido la historia y el aprendizaje de cómo pasé un proceso en Node.js de 5 horas a 5 minutos. Recapitulando estos son mis 6 consejos cuando gestionas asincronía en JavaScript:</p>
<ol>
<li>Evita los async innecesarios</li>
<li>Evita los await dentro de los bucles</li>
<li>Usa Promise.all siempre que puedas</li>
<li>Sé consciente de cuantas promesas estás gestionando</li>
<li>Haz casos de los warnings.</li>
</ol>
<h2>Un par de cosas más</h2>
<p>Tengo un par de cosas más en el tintero que no son producto de esta experiencia con <em>El Proyecto Leñador</em>, sino del día a día durante los últimos años y quiero compartirlas.</p>
<ul>
<li><strong>No mezcles tipos de asincronía</strong>: Aparte de ser más difícil de leer, también acaba afectando al performance porque la mayoría de las veces lo que hacemos es complicar el comportamiento asíncrono.</li>
<li><strong>Async generators, ese gran desconocido</strong>: En JavaScript existe una cosa llamada generators, de la cual llegó hace un par de años su versión asíncrona. Los async generators donde brillan es al gestionar streams. Sin embargo, hay otros casos de uso que también son muy útiles. Lucciano Mammino dió una <a href="https://www.youtube.com/watch?v=uTzBHPpMEhA" target="_blank" rel="noopener">charla sobre ellos en la NodeCONF EU en 2021</a>.</li>
<li><strong>Investiga sobre el Event Loop</strong>: Entender cómo funciona JavaScript por debajo te ayuda a entender por qué a veces las cosas no pasan como esperamos. En la documentación de Node.js hay un apartado de guías en la cual hay una llamada <a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" target="_blank" rel="noopener"><em>The Node.js Event Loop, Timers, and process.nextTick()</em></a>. Es un documento que tardaron 6 meses en escribir y que explica los diferentes procesos y el orden en el que se ejecutan en cada vuelta del Event Loop en Node.js.</li>
</ul>
<p>También dejo por aquí <a href="https://www.nearform.com/blog/optimise-node-js-performance-avoiding-broken-promises/" target="_blank" rel="noopener">este artículo de James Snell</a> sobre gestión de promesas en Node.js.</p>

  <author-info class="ws3sp0wuz"><section class="author-info">
  <a href="/">
    <flipable-image class="wzsx78kcv"><div class="flipable-image">
  <div class="flip-container">
    <div class="flip-front">
      <img src="/assets/about/author.jpg" alt="Ulises Santana">
    </div>
    <div class="flip-back no-print">
      <img src="/assets/images/logo.png" alt="Ulises Santana">
    </div>
  </div>
</div>

</flipable-image>
    
  </a>
  <div class="info">
    <h2 class="title" custom>
      
        👋 Hola! Soy <b>Ulises Santana</b>
      
      
    </h2>
    <p class="description">
      
        Me gano la vida como Full Stack Developer. 
        JavaScript es mi lengua materna y la web mi patria.
        Trasteo con tecnologías desde las Islas Canarias 🏝️
      
      
    </p>
    <social-media class="wcscm75lq"><div class="social-media">
  <ul>
    <li>
      <social-media-item label="Github" url="https://github.com/ulisesantana" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="https://github.com/ulisesantana" target="_blank" aria-label="social profile" rel="noopener">
      <svg viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
  <rect width="256" height="256" rx="60" fill="#F4F2ED"></rect>
  <path d="M128.001 30C72.779 30 28 74.77 28 130.001c0 44.183 28.653 81.667 68.387 94.89 4.997.926 6.832-2.169 6.832-4.81 0-2.385-.093-10.262-.136-18.618-27.82 6.049-33.69-11.799-33.69-11.799-4.55-11.559-11.104-14.632-11.104-14.632-9.073-6.207.684-6.079.684-6.079 10.042.705 15.33 10.305 15.33 10.305 8.919 15.288 23.394 10.868 29.1 8.313.898-6.464 3.489-10.875 6.349-13.372-22.212-2.529-45.56-11.104-45.56-49.421 0-10.918 3.906-19.839 10.303-26.842-1.039-2.519-4.462-12.69.968-26.464 0 0 8.398-2.688 27.508 10.25 7.977-2.215 16.531-3.326 25.03-3.364 8.498.038 17.06 1.149 25.051 3.365 19.087-12.939 27.473-10.25 27.473-10.25 5.443 13.773 2.019 23.945.98 26.463 6.412 7.003 10.292 15.924 10.292 26.842 0 38.409-23.394 46.866-45.662 49.341 3.587 3.104 6.783 9.189 6.783 18.519 0 13.38-.116 24.149-.116 27.443 0 2.661 1.8 5.779 6.869 4.797C199.383 211.64 228 174.169 228 130.001 228 74.771 183.227 30 128.001 30ZM65.454 172.453c-.22.497-1.002.646-1.714.305-.726-.326-1.133-1.004-.898-1.502.215-.512.999-.654 1.722-.311.727.326 1.141 1.01.89 1.508Zm4.919 4.389c-.477.443-1.41.237-2.042-.462-.654-.697-.777-1.629-.293-2.078.491-.442 1.396-.235 2.051.462.654.706.782 1.631.284 2.078Zm3.374 5.616c-.613.426-1.615.027-2.234-.863-.613-.889-.613-1.955.013-2.383.621-.427 1.608-.043 2.236.84.611.904.611 1.971-.015 2.406Zm5.707 6.504c-.548.604-1.715.442-2.57-.383-.874-.806-1.118-1.95-.568-2.555.555-.606 1.729-.435 2.59.383.868.804 1.133 1.957.548 2.555Zm7.376 2.195c-.242.784-1.366 1.14-2.499.807-1.13-.343-1.871-1.26-1.642-2.052.235-.788 1.364-1.159 2.505-.803 1.13.341 1.871 1.252 1.636 2.048Zm8.394.932c.028.824-.932 1.508-2.121 1.523-1.196.027-2.163-.641-2.176-1.452 0-.833.939-1.51 2.134-1.53 1.19-.023 2.163.639 2.163 1.459Zm8.246-.316c.143.804-.683 1.631-1.864 1.851-1.161.212-2.236-.285-2.383-1.083-.144-.825.697-1.651 1.856-1.865 1.183-.205 2.241.279 2.391 1.097Z" fill="#161614"></path>
</svg>


    </a>
    <span class="tooltip">Github</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>Github</span>
      <span>https://github.com/ulisesantana</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
    <li>
      <social-media-item label="LinkedIn" url="https://www.linkedin.com/in/ulisesantana/" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="https://www.linkedin.com/in/ulisesantana/" target="_blank" aria-label="social profile" rel="noopener">
      <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" viewBox="0 0 512 512" fill="#fff" height="1em" width="1em">
  <rect width="512" height="512" rx="15%" fill="#0077b5"></rect>
  <circle cx="142" cy="138" r="37"></circle>
  <path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"></path>
  <path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"></path>
</svg>

    </a>
    <span class="tooltip">LinkedIn</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>LinkedIn</span>
      <span>https://www.linkedin.com/in/ulisesantana/</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
    <li>
      <social-media-item label="Twitter" url="https://twitter.com/ulisesantana" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="https://twitter.com/ulisesantana" target="_blank" aria-label="social profile" rel="noopener">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 209" height="1em" width="1em">
  <path d="M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52 0 4.117.465 8.125 1.36 11.97-43.65-2.191-82.35-23.1-108.255-54.876-4.52 7.757-7.11 16.78-7.11 26.404 0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661 0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475-17.975 14.086-40.622 22.483-65.228 22.483-4.24 0-8.42-.249-12.529-.734 23.243 14.902 50.85 23.597 80.51 23.597 96.607 0 149.434-80.031 149.434-149.435 0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45" fill="#55acee"></path>
</svg>

    </a>
    <span class="tooltip">Twitter</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>Twitter</span>
      <span>https://twitter.com/ulisesantana</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
    <li>
      <social-media-item label="Curriculum Vitae" url="/cv" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="/cv" target="_blank" aria-label="social profile">
      <svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="1em" width="1em">
  <path fill="#90CAF9" d="M40 45H8V3h22l10 10z"></path>
  <path fill="#E1F5FE" d="M38.5 14H29V4.5z"></path>
  <path d="M16 21h17v2H16zm0 4h13v2H16zm0 4h17v2H16zm0 4h13v2H16z" fill="#1976D2"></path>
</svg>

    </a>
    <span class="tooltip">Curriculum Vitae</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>Curriculum Vitae</span>
      <span>/cv</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
  </ul>
</div>

</social-media>
  </div>
</section>

</author-info>
  <related-posts url="/blog/2022/como-pase-un-proceso-en-nodejs-de-5-horas-a-5-minutos/"><section class="related-posts">
  <h3>Artículos relacionados</h3>
      
      <ul>
      
          <li>
            <a href="/blog/2021/corepack/">
              <article class="post-card-minimal">
                <div class="cover">
                  <object data="/assets/blog/2021/corepack/cover.png" title="Corepack: el puente entre gestores de paquetes para Node.js" type="image/png">
                    <img src="/assets/images/fallback.png" title="Corepack: el puente entre gestores de paquetes para Node.js">
                  </object>
                </div>
                <div class="content">
                  <h4 custom>Corepack: el puente entre gestores de paquetes para Node.js</h4>
                  <time datetime="viernes, 10 de septiembre de 2021">viernes, 10 de septiembre de 2021</time>
                  <span class="excerpt">Node.js acaba de sacar Corepack como solución nativa para los diferentes gestores de paquetes que existen en el ecosistema de Node.js.</span>
                  <site-tags url="/blog/2021/corepack/"><ul class="tag-list">
    <li>
            <site-tag><span class="tag">#node.js</span>

</site-tag>
          </li>
        
          <li>
            <site-tag><span class="tag">#development</span>

</site-tag>
          </li>
        
          <li>
            <site-tag><span class="tag">#npm</span>

</site-tag>
          </li>
        
</ul>

</site-tags>
                </div>
              </article>
            </a>
          </li>
        
          <li>
            <a href="/blog/2021/oclif/">
              <article class="post-card-minimal">
                <div class="cover">
                  <object data="/assets/blog/2021/oclif/cover.png" title="oclif: el framework para hacer CLIs en Node.js y TypeScript" type="image/png">
                    <img src="/assets/images/fallback.png" title="oclif: el framework para hacer CLIs en Node.js y TypeScript">
                  </object>
                </div>
                <div class="content">
                  <h4 custom>oclif: el framework para hacer CLIs en Node.js y TypeScript</h4>
                  <time datetime="domingo, 3 de octubre de 2021">domingo, 3 de octubre de 2021</time>
                  <span class="excerpt">oclif se define como el framework abierto para CLIs en Node.js. Te cuento sus bondades y por qué deberías planteártelo para tu próximo CLI.</span>
                  <site-tags url="/blog/2021/oclif/"><ul class="tag-list">
    <li>
            <site-tag><span class="tag">#node.js</span>

</site-tag>
          </li>
        
          <li>
            <site-tag><span class="tag">#cli</span>

</site-tag>
          </li>
        
</ul>

</site-tags>
                </div>
              </article>
            </a>
          </li>
        
          <li>
            <a href="/blog/2022/por-que-no-usar-jest/">
              <article class="post-card-minimal">
                <div class="cover">
                  <object data="/assets/blog/2022/por-que-no-usar-jest/cover.png" title="Por qué no usar Jest" type="image/png">
                    <img src="/assets/images/fallback.png" title="Por qué no usar Jest">
                  </object>
                </div>
                <div class="content">
                  <h4 custom>Por qué no usar Jest</h4>
                  <time datetime="domingo, 9 de enero de 2022">domingo, 9 de enero de 2022</time>
                  <span class="excerpt">Llevo años usando Jest para mis proyectos en Node.js, pero cada vez oigo más quejas por parte de la comunidad de Node.js sobre Jest y que no deberías usarlo.</span>
                  <site-tags url="/blog/2022/por-que-no-usar-jest/"><ul class="tag-list">
    <li>
            <site-tag><span class="tag">#node.js</span>

</site-tag>
          </li>
        
          <li>
            <site-tag><span class="tag">#testing</span>

</site-tag>
          </li>
        
          <li>
            <site-tag><span class="tag">#jest</span>

</site-tag>
          </li>
        
</ul>

</site-tags>
                </div>
              </article>
            </a>
          </li>
        </ul>
</section>

</related-posts>
</article>

</main>
<scroll-to-top><button title="Scroll to top" class="scroll-to-top hidden no-print">
  <up-icon><span class="up-icon">
  <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 1024 1024" height="1em" width="1em">
    <path d="M890.5 755.3 537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 0 0 140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path>
  </svg>
</span>

</up-icon>
</button>

</scroll-to-top>
<site-footer class="wzhztpn9m"><footer class="no-print">
  <span class="bar"></span>
  <social-media class="wcscm75lq"><div class="social-media">
  <ul>
    <li>
      <social-media-item label="Github" url="https://github.com/ulisesantana" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="https://github.com/ulisesantana" target="_blank" aria-label="social profile" rel="noopener">
      <svg viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
  <rect width="256" height="256" rx="60" fill="#F4F2ED"></rect>
  <path d="M128.001 30C72.779 30 28 74.77 28 130.001c0 44.183 28.653 81.667 68.387 94.89 4.997.926 6.832-2.169 6.832-4.81 0-2.385-.093-10.262-.136-18.618-27.82 6.049-33.69-11.799-33.69-11.799-4.55-11.559-11.104-14.632-11.104-14.632-9.073-6.207.684-6.079.684-6.079 10.042.705 15.33 10.305 15.33 10.305 8.919 15.288 23.394 10.868 29.1 8.313.898-6.464 3.489-10.875 6.349-13.372-22.212-2.529-45.56-11.104-45.56-49.421 0-10.918 3.906-19.839 10.303-26.842-1.039-2.519-4.462-12.69.968-26.464 0 0 8.398-2.688 27.508 10.25 7.977-2.215 16.531-3.326 25.03-3.364 8.498.038 17.06 1.149 25.051 3.365 19.087-12.939 27.473-10.25 27.473-10.25 5.443 13.773 2.019 23.945.98 26.463 6.412 7.003 10.292 15.924 10.292 26.842 0 38.409-23.394 46.866-45.662 49.341 3.587 3.104 6.783 9.189 6.783 18.519 0 13.38-.116 24.149-.116 27.443 0 2.661 1.8 5.779 6.869 4.797C199.383 211.64 228 174.169 228 130.001 228 74.771 183.227 30 128.001 30ZM65.454 172.453c-.22.497-1.002.646-1.714.305-.726-.326-1.133-1.004-.898-1.502.215-.512.999-.654 1.722-.311.727.326 1.141 1.01.89 1.508Zm4.919 4.389c-.477.443-1.41.237-2.042-.462-.654-.697-.777-1.629-.293-2.078.491-.442 1.396-.235 2.051.462.654.706.782 1.631.284 2.078Zm3.374 5.616c-.613.426-1.615.027-2.234-.863-.613-.889-.613-1.955.013-2.383.621-.427 1.608-.043 2.236.84.611.904.611 1.971-.015 2.406Zm5.707 6.504c-.548.604-1.715.442-2.57-.383-.874-.806-1.118-1.95-.568-2.555.555-.606 1.729-.435 2.59.383.868.804 1.133 1.957.548 2.555Zm7.376 2.195c-.242.784-1.366 1.14-2.499.807-1.13-.343-1.871-1.26-1.642-2.052.235-.788 1.364-1.159 2.505-.803 1.13.341 1.871 1.252 1.636 2.048Zm8.394.932c.028.824-.932 1.508-2.121 1.523-1.196.027-2.163-.641-2.176-1.452 0-.833.939-1.51 2.134-1.53 1.19-.023 2.163.639 2.163 1.459Zm8.246-.316c.143.804-.683 1.631-1.864 1.851-1.161.212-2.236-.285-2.383-1.083-.144-.825.697-1.651 1.856-1.865 1.183-.205 2.241.279 2.391 1.097Z" fill="#161614"></path>
</svg>


    </a>
    <span class="tooltip">Github</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>Github</span>
      <span>https://github.com/ulisesantana</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
    <li>
      <social-media-item label="LinkedIn" url="https://www.linkedin.com/in/ulisesantana/" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="https://www.linkedin.com/in/ulisesantana/" target="_blank" aria-label="social profile" rel="noopener">
      <svg xmlns="http://www.w3.org/2000/svg" aria-label="LinkedIn" viewBox="0 0 512 512" fill="#fff" height="1em" width="1em">
  <rect width="512" height="512" rx="15%" fill="#0077b5"></rect>
  <circle cx="142" cy="138" r="37"></circle>
  <path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"></path>
  <path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"></path>
</svg>

    </a>
    <span class="tooltip">LinkedIn</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>LinkedIn</span>
      <span>https://www.linkedin.com/in/ulisesantana/</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
    <li>
      <social-media-item label="Twitter" url="https://twitter.com/ulisesantana" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="https://twitter.com/ulisesantana" target="_blank" aria-label="social profile" rel="noopener">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 209" height="1em" width="1em">
  <path d="M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52 0 4.117.465 8.125 1.36 11.97-43.65-2.191-82.35-23.1-108.255-54.876-4.52 7.757-7.11 16.78-7.11 26.404 0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661 0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475-17.975 14.086-40.622 22.483-65.228 22.483-4.24 0-8.42-.249-12.529-.734 23.243 14.902 50.85 23.597 80.51 23.597 96.607 0 149.434-80.031 149.434-149.435 0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45" fill="#55acee"></path>
</svg>

    </a>
    <span class="tooltip">Twitter</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>Twitter</span>
      <span>https://twitter.com/ulisesantana</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
    <li>
      <social-media-item label="Curriculum Vitae" url="/cv" class="wuzpprqmy"><div class="social-media-item">
  <div class="no-print">
    <a href="/cv" target="_blank" aria-label="social profile">
      <svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="1em" width="1em">
  <path fill="#90CAF9" d="M40 45H8V3h22l10 10z"></path>
  <path fill="#E1F5FE" d="M38.5 14H29V4.5z"></path>
  <path d="M16 21h17v2H16zm0 4h13v2H16zm0 4h17v2H16zm0 4h13v2H16z" fill="#1976D2"></path>
</svg>

    </a>
    <span class="tooltip">Curriculum Vitae</span>
  </div>
  <span class="only-print">
    <div class="only-print-data">
      <span>Curriculum Vitae</span>
      <span>/cv</span>
    </div>
  </span>
</div>

</social-media-item>
    </li>
  </ul>
</div>

</social-media>
  <div class="bottom-text">
    <span class="thanks">
      <span>
        Hecho con <svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="1em" width="1em">
  <path fill="#F44336" d="M34 9c-4.2 0-7.9 2.1-10 5.4C21.9 11.1 18.2 9 14 9 7.4 9 2 14.4 2 21c0 11.9 22 24 22 24s22-12 22-24c0-6.6-5.4-12-12-12z"></path>
</svg> y
      </span>
      
      <a href="https://www.11ty.dev" target="_blank" rel="noopener">
        <eleventy-icon class="wpsio4mfp"><svg viewBox="0 0 256 214" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" height="1em" width="1em">
  <path d="M98.329 4.641c2.143 0 3.846 1.213 4.763 3.183.644 1.38.925 3.134.939 5.337v157.715c-.013 2.92-.318 5.202-.987 6.92-.927 2.386-2.696 3.926-5.11 3.966h-.095l-18.186-.023c-2.458 0-4.227-1.574-5.135-4.001-.639-1.706-.93-3.974-.942-6.885V39.145l-4.897 1.24-1.954.49-.571.14-.29.067-.136.028-.05.008-.026.003h-.027l-.003-.002-.001-.003v-.003l.004-.004.031-.03c.012-.012.017-.023-.002-.03l-.011-.004-.057.003c-2.063.077-3.78-1.026-4.719-2.917-.671-1.35-.959-3.076-.972-5.26V21.284c0-2.046.33-3.764 1.076-5.165.85-1.598 2.213-2.695 3.927-3.14l.103-.026.119-.028 31.446-8.093a7.014 7.014 0 0 1 1.478-.187l.147-.004h.138ZM150.842 0c2.253 0 4.048 1.263 5.034 3.344.712 1.505 1.03 3.442 1.043 5.878v46.473l.001.11h13.526c2.124 0 3.87 1.096 4.897 2.965l.048.09.047.09c.743 1.453 1.07 3.307 1.085 5.623v6.593c0 2.356-.328 4.24-1.098 5.712-1.003 1.917-2.75 3.05-4.88 3.084h-13.647v61.196l.004.476.005.47.008.463.005.23.014.566.017.555.021.546.025.535.01.212.023.418.026.41.027.406.03.398.015.196.033.389.017.191.018.19.037.376.04.368.02.182.043.359c.091.746.198 1.449.318 2.108l.04.218.03.154.058.288.059.28.03.139.061.271.063.264.032.13.065.254c.084.323.172.629.262.917l.078.244c.382 1.156.811 2.016 1.265 2.574.842 1.037 1.583 1.663 2.153 1.912l.173.071c.674.269 1.607.422 2.807.432h8.577c2.019 0 3.765.804 4.91 2.383.952 1.311 1.37 2.976 1.388 4.97l.001.14v7.139c0 2.207-.428 4.027-1.427 5.443-1.16 1.645-2.936 2.506-5 2.535h-.11l-12.116.023c-3.359 0-6.29-.236-8.84-.717-2.728-.515-5.501-1.647-8.35-3.381-2.967-1.806-5.4-4.283-7.292-7.404-1.84-3.032-3.277-7.123-4.36-12.284-1.056-5.025-1.595-10.88-1.614-17.546V79.962h-5.592c-2.107 0-3.85-1.068-4.883-2.907l-.048-.088-.048-.09c-.752-1.437-1.083-3.268-1.099-5.547v-6.595c0-2.391.326-4.299 1.086-5.785.996-1.948 2.745-3.108 4.891-3.143l.101-.001h5.591v-.182l2.148-46.374.012-.208c.152-2.397.54-4.284 1.25-5.733.984-2.01 2.671-3.27 4.823-3.309h12.013Zm100.03 55.762c2 0 3.553 1.183 4.356 3.01.544 1.239.772 2.79.772 4.725 0 .071 0 .143-.002.217l-.002.111-.008.23-.005.117-.014.241-.008.124-.02.254c-.016.207-.037.422-.06.646l-.02.17-.033.29-.038.3-.041.311-.033.236-21.207 110.414-.05.271-.105.576-.107.57-.16.844-.108.556-.163.824-.109.542-.11.537-.11.532-.11.526-.111.52-.168.771-.112.507-.113.502-.114.496-.114.49-.114.486-.115.48-.116.474-.116.468-.117.464-.117.457-.118.453-.118.447-.119.441-.119.436-.12.43-.12.426-.12.42-.122.413-.122.409-.123.403-.123.398-.123.392-.124.387-.125.38-.125.377-.063.185-.126.368-.063.182-.063.18-.16.445-.159.437-.064.172-.129.34-.129.335-.173.438-.152.373-.157.38c-.278.66-.56 1.294-.847 1.904l-.124.26-.166.34-.167.336c-1.843 3.664-3.908 6.33-6.281 8.004-2.957 2.104-6.73 3.18-11.291 3.309l-.205.005h-1.26c-7.15 0-12.374-1.962-15.383-6.11l-.09-.126-.078-.111-.04-.05c-.857-1.088-1.281-2.586-1.448-4.68l-.011-.141-.018-.269-.009-.137-.007-.138-.013-.281-.006-.143-.005-.145-.01-.37-.007-.38-.002-.154-.002-.315v-.346l.001-.191.004-.378.003-.186.004-.184.009-.364.005-.179.007-.177.014-.35.017-.342.02-.336.023-.33.012-.16.027-.32.03-.311c.14-1.389.366-2.572.687-3.565.833-2.576 2.49-4.305 4.992-4.346h.09l.098.001.081.004.084.006.087.009.118.015.128.021.172.033.16.034.142.033.279.07.375.098.505.14.534.152.707.206 1.694.497.48.146.431.128.41.119.388.11.366.1.26.07.246.065.308.078.283.069.196.046.181.04.166.036.199.04.13.023.115.018.068.01.06.006.053.005.024.001.042.002a.177.177 0 0 0 .08-.02c.088-.039.206-.119.354-.257.462-.433.98-1.221 1.498-2.368.659-1.457 1.141-3.34 1.433-5.638l.024-.198.04-.344.037-.35.018-.178.017-.179.031-.362a49.99 49.99 0 0 0 .158-3.865l.001-.298-.002-.095-.004-.074-.01-.126-.018-.196-.027-.229-.034-.26-.02-.143-.045-.308-.053-.34-.076-.47-.088-.517-.1-.565-.11-.613-.15-.798-.164-.864-.213-1.092-.27-1.357-.26-1.281-.324-1.57-.343-1.635-23.364-97.108-.04-.291-.038-.277-.034-.267-.032-.257-.035-.309-.03-.295-.011-.114-.02-.222-.016-.215-.007-.104-.013-.203-.009-.195-.003-.095-.005-.186-.001-.09v-.25c.012-1.724.215-3.114.686-4.242.733-1.758 2.187-2.94 4.107-2.977l.091-.001h14.41c1.93 0 3.64.705 4.961 2.066 1.216 1.252 1.941 3.142 2.413 5.776l.027.15.044.262 12.677 67.097 9.9-66.63.016-.127c.36-2.668.968-4.651 1.978-6.02l.061-.081.061-.079c1.223-1.548 2.936-2.405 4.886-2.436h10.097ZM38.456 4.84c2.143 0 3.846 1.213 4.764 3.183.643 1.38.925 3.134.938 5.337v157.528c0 3.01-.304 5.352-.986 7.108-.927 2.385-2.697 3.925-5.108 3.964H19.76c-2.459 0-4.228-1.574-5.136-4.001-.639-1.706-.93-3.974-.942-6.885V39.366l-3.513.888-2.771.693-.657.158-.29.067-.22.046-.125.02-.103.01-.122.01c-2.147.155-3.94-.958-4.908-2.906-.67-1.35-.958-3.076-.972-5.26V21.505c0-2.046.33-3.764 1.076-5.165.85-1.598 2.213-2.695 3.927-3.14l.103-.026.12-.028 31.467-8.115a7.014 7.014 0 0 1 1.478-.188l.147-.003h.138Z"></path>
</svg>
</eleventy-icon>
      </a>
    </span>
    <small>Ulises Santana &copy; 2019 - 2023</small>
  </div>
</footer>

</site-footer>



</body>
</html>